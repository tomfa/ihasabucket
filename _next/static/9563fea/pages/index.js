(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"/EDR":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n("23aj")}])},"23aj":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Re}));var r=n("q1tI"),o=n.n(r),a=n("bnak"),i=n("winv"),c=n("TCG4"),u=n("4DxX"),l=o.a.createElement,s=function(){return l(a.c,null,l(u.a,{author:"Lolrus, the bucket walrus"},l(o.a.Fragment,null,"Hosting a ",l(a.a,{secondary:!0}," web app "),"or need to store uploads? Put them in S3 buckets. It's",l(a.a,{secondary:!0}," cheap "),"and",l(a.a,{secondary:!0}," reliable"),". With CloudFront cache, it'll be blazingly ",l(a.a,{secondary:!0},"fast"),". Let's see how",l(a.a,{secondary:!0}," easy "),"it can be.")))};function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){if(e){if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function d(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){o=!0,a=u}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var m=n("s4NR"),y=n.n(m),g=n("nOHt");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=function(e){return Object.entries(e).reduce((function(e,t){var n=h(t,2),r=n[0],o=n[1];return o?O({},e,b({},r,o)):e}),{})};var w,S,_,A,C,k=function(e){return"false"!==e.toLowerCase()&&("true"===e.toLowerCase()||(function(e){return!Number.isNaN(parseInt(e))}(e)?parseInt(e):e))},T=function(e){return Object.entries(e).reduce((function(e,t){var n=h(t,2),r=n[0],o=n[1];return O({},e,b({},r,o instanceof Array?o.map((function(e){return String(e)})):String(o)))}),{})},j=function(e){var t={};return Object.entries(e).forEach((function(e){var n=h(e,2),r=n[0],o=n[1];o&&(t[r]=o instanceof Array?o.map(k):k(o))})),t},P=function(e,t){return JSON.stringify(e)!==JSON.stringify(t)};!function(e){e.RADIO="radio",e.CHECKBOX="checkbox",e.TEXT="text",e.DROPDOWN="dropdown"}(w||(w={})),function(e){e[e.NOT_EMPTY=0]="NOT_EMPTY"}(S||(S={})),function(e){e.createCertificates="create-certificates",e.bucketName="bucket",e.storageType="storage",e.webappIsStatic="static",e.aclPublic="public",e.configureDns="configure-dns",e.stagingEnv="staging",e.region="region"}(_||(_={})),function(e){e.FALSE="false",e.TRUE="true"}(A||(A={})),function(e){e.BUCKET_NAME="bucket_name",e.AWS_REGION="aws_region",e.AWS_ACCESS_KEY="aws_access_key",e.AWS_SECRET_KEY="aws_secret_key",e.ACL="acl",e.ERROR_RESPONSE_CODE="error_response_code",e.ERROR_RESPONSE_PATH="error_response_path"}(C||(C={}));var N;!function(e){e.WEBAPP="web-app",e.FILE_STORAGE="file-storage"}(N||(N={}));var I;function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}!function(e){e.US_EAST_2="us-east-2",e.US_EAST_1="us-east-1",e.US_WEST_1="us-west-1",e.US_WEST_2="us-west-2",e.AF_SOUTH_1="af-south-1",e.AP_EAST_1="ap-east-1",e.AP_SOUTH_1="ap-south-1",e.AP_NORTHEAST_3="ap-northeast-3",e.AP_NORTHEAST_2="ap-northeast-2",e.AP_SOUTHEAST_1="ap-southeast-1",e.AP_SOUTHEAST_2="ap-southeast-2",e.AP_NORTHEAST_1="ap-northeast-1",e.CA_CENTRAL_1="ca-central-1",e.CN_NORTH_1="cn-north-1",e.CN_NORTHWEST_1="cn-northwest-1",e.EU_CENTRAL_1="eu-central-1",e.EU_WEST_1="eu-west-1",e.EU_WEST_2="eu-west-2",e.EU_SOUTH_1="eu-south-1",e.EU_WEST_3="eu-west-3",e.EU_NORTH_1="eu-north-1",e.SA_EAST_1="sa-east-1",e.ME_SOUTH_1="me-south-1"}(I||(I={}));var R=[{id:_.bucketName,title:"",type:w.TEXT,placeholders:["mydomain.com","uploads.mydomain.com","staging.mydomain.com","www.mydomain.com","test.mydomain.com","uploads.mydomain.com"],description:'We will use this as the S3 bucket name. The bucket name is permanent, but it doesn\'t have to match an actual domain. It does however have to be unique on S3, so "example" or "my-bucket" will not work. If you leave it empty, you\'ll be prompted for a bucket name at deploy time.'},{id:_.storageType,title:"What are we storing?",type:w.RADIO,description:"Unlike normal file storage, web apps like React and Vue have a default path, and error pages.",options:[{value:"webapp",label:"A web app"},{value:"files",label:"Static files or media uploads"}]},{id:_.webappIsStatic,title:"Is the web app statically generated?",type:w.RADIO,description:"Statically generated sites can be optimized for search engines by returning correct HTTP status codes. If you are uncertain, select No.",options:[{value:A.TRUE,label:"Yes (e.g. Next, Gatsby, Nuxt)"},{value:A.FALSE,label:"No (e.g. plain Vue or React)"}],showIf:[{questionId:_.storageType,value:"webapp"}]},{id:_.aclPublic,title:"Should content be publicly available?",type:w.RADIO,description:"If our files hold secret or personal information, we will need a stricter security policy than if we are storing publicly available files, e.g. media files for a CMS.",options:[{value:A.TRUE,label:"Yes, make files public"},{value:A.FALSE,label:"No, let me control access to the files"}],showIf:[{questionId:_.storageType,value:"files"}]},{id:_.configureDns,title:"Should AWS set up DNS pointers?",type:w.RADIO,description:"Should we setup DNS pointers for your domain? (Recommended). Route 53 costs 1.5$ / month",options:[{value:A.TRUE,label:"Yes, please do"},{value:A.FALSE,label:"No, I'll set up DNS afterwards"}],showIf:[{questionId:_.bucketName,value:S.NOT_EMPTY}]},{id:_.createCertificates,title:"Should AWS create certificates to support the domain?",type:w.RADIO,description:"AWS can create HTTPS certificates for us. This is recommended and free of charge.",options:[{value:A.TRUE,label:"Please do"},{value:A.FALSE,label:"No, I`ll configure certificates myself"}],showIf:[{questionId:_.bucketName,value:S.NOT_EMPTY},{questionId:_.configureDns,value:A.FALSE}]},{id:_.region,title:"In what region do you want the buckets?",type:w.DROPDOWN,defaultValue:I.EU_NORTH_1,description:"A region closer to your users can give an extra performance boost.",options:Object.values(I).map((function(e){return{value:e,label:e}}))},{id:_.stagingEnv,title:"Want a test environment?",type:w.RADIO,description:"A staging (or test) environment would mean a duplicate set of buckets. If you're uncertain, select No. You can always create a staging environment later.",options:[{value:A.TRUE,label:"Yes, please create a separate set of buckets for testing"},{value:A.FALSE,label:"No, I won't need that"}]}],D=R.reduce((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,b({},t.id,t))}),{}),L=function(e){return null===e?"":"string"===typeof e||"number"===typeof e||"boolean"===typeof e?String(e):e instanceof Array?e.map((function(e){return e.value})).join(","):null!==e.value?e.value:""},W=function(e,t){return L(e[t])},U=function(e,t,n){var r=D[t];if(r.type===w.RADIO){var o=e[t];return null===o?null===n:o.value===n}if(r.type===w.CHECKBOX){var a=e[t];return null===a?null===n:!!a.find((function(e){return e.value===n}))}if(r.type===w.DROPDOWN){var i=e[t];return null===i?null===n:i.value===n}if(r.type===w.TEXT){var c=e[t];return null===c?null===n:c===n}},M=function(e,t){return e.showIf&&!!e.showIf.find((function(e){return!function(e,t){return U(t,e.questionId,e.value)}(e,t)}))},K=function(e,t){var n=[],r=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=R[r];if(!o)return r;var a=!n.includes(o.id)&&!M(o,t);return a?r:e(t,n,r+1)}(e,t);return R.slice(0,r+1).forEach((function(t){M(t,e)||n.push(t)})),n};function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=function(){var e=Object(r.useState)([]),t=e[0],n=e[1],o=function(){var e=Object(g.useRouter)(),t=Object(r.useState)({}),n=t[0],o=t[1];Object(r.useEffect)((function(){var t=j(e.query);P(n,t)&&o(t)}),[JSON.stringify(e.query)]);var a=Object(r.useCallback)((function(t){var r=E(O({},T(n),{},T(t)));o(r),e.push("/?"+y.a.stringify(r))}),[n]);return{urlData:n,updateUrlData:a}}(),a=o.urlData,i=o.updateUrlData,c=Object(r.useState)({}),u=c[0],l=c[1];Object(r.useEffect)((function(){if(!(t.length>0)){var e=R.reduce((function(e,t){return H({},e,b({},t.id,function(e,t){if(e.type===w.TEXT)return t||e.defaultValue||null;if(e.type===w.RADIO||e.type===w.DROPDOWN){var n=t||e.defaultValue;return e.options.find((function(e){return(null===e||void 0===e?void 0:e.value)===n}))||null}if(e.type===w.CHECKBOX){var r=t||e.defaultValue;return r?"string"===typeof r||"number"===typeof r?e.options.filter((function(e){return e.value===r})):r instanceof Array?e.options.filter((function(e){return r.includes(e.value)})):null:[]}}(t,a[t.id]?String(a[t.id]):void 0)))}),{}),r=!Object.keys(u).length;Object.keys(a).length?(n(Object.keys(a)),l(e)):r&&l(e)}}),[a,t]);var s=Object(r.useMemo)((function(){return K(u,t)}),[t,u]),p=!s.find((function(e){return!t.includes(e.id)})),f=Object(r.useCallback)((function(e,t){i(b({},String(e),L(t))),l((function(n){return H({},n,b({},e,t))})),n((function(t){return[].concat(d(t),[e])}))}),[i]);return{answers:u,renderQuestions:s,answerQuestion:f,hasAnsweredAll:p}},B=n("Yr1c"),q=n("vOnD"),z=q.c.label.withConfig({displayName:"Labelstyle__Label",componentId:"u2u342-0"})(["position:relative;cursor:pointer;padding-bottom:0.7rem;padding-top:0.7rem;padding-left:3rem;padding-right:1.2rem;margin-bottom:3px;background-color:",";color:",";border:2px solid transparent;&:before{content:'';display:block;width:",";height:20px;border:3px solid ",";position:absolute;left:",";top:",";opacity:",";-webkit-transition:all 0.12s,border-color 0.08s;transition:all 0.12s,border-color 0.08s;border-top-color:",";border-left-color:",";transform:",";}"],(function(e){return e.checked?e.theme.colors.primary:""}),(function(e){return e.checked?e.theme.colors.textSecondary:e.theme.colors.textPrimary}),(function(e){return e.checked?"10px":"20px"}),(function(e){return e.checked?"white":"black"}),(function(e){return e.checked?"18px":"13px"}),(function(e){return e.checked?"3px":"8px"}),(function(e){return e.checked?1:.6}),(function(e){return e.checked&&"transparent"}),(function(e){return e.checked&&"transparent"}),(function(e){return e.checked&&"rotate(45deg)"})),X=q.c.input.withConfig({displayName:"Inputstyle__Input",componentId:"sc-1nl68ta-0"})(["&[type='checkbox']{width:1px;height:1px;outline:none;border:none;opacity:0;}&[type='radio']{width:1px;height:1px;outline:none;border:none;opacity:0;}&[type='text']{padding:1rem;flex:1;border:none;font-size:1.2rem;&:focus{margin-right:4px;outline:2px dashed ",";}}&:focus + ","{outline:2px dashed ",";}&:focus::placeholder{color:transparent;}"],(function(e){return e.theme.colors.primary}),z,(function(e){return e.theme.colors.primary})),G=o.a.createElement,J=function(e){var t=e.checked,n=e.group,r=e.onChange,a=e.value,i=e.label,c=e.disabled,u=void 0!==c&&c,l="".concat(n,"-").concat(a);return G(o.a.Fragment,null,G(X,{id:l,value:a,name:l,type:"radio",group:n,checked:t,onChange:function(){return!u&&r(a,!t)},disabled:u}),G(z,{htmlFor:l,checked:t},i))},Q=q.c.p.withConfig({displayName:"Descriptionstyle__Description",componentId:"sc-1vej8zf-0"})(["color:",";font-size:0.8rem;font-style:italic;"],(function(e){return e.theme.colors.textMuted})),V=q.c.div.withConfig({displayName:"Choicesstyle__Choices",componentId:"sc-1r49bg-0"})(["display:flex;flex-direction:column;"]),$=q.c.div.withConfig({displayName:"Questionstyle__Question",componentId:"sc-1ce9jof-0"})(["margin-bottom:2.5rem;"]),Z=o.a.createElement,ee=function(e){var t=e.id,n=e.options,o=e.selectedOption,a=e.onChange,i=e.title,c=e.description,u=e.disabled,l=void 0!==u&&u,s=Object(r.useCallback)((function(e,t){if(!l){if(!t)return a(null);var r=n.find((function(t){return t.value===e}));r&&a(r)}}),[l,n,a]);return Z($,null,i&&Z(B.a,null,i),Z(V,null,n.map((function(e){return Z(J,{key:"".concat(t,"-").concat(e.value),group:t,checked:e===o,onChange:s,value:e.value,label:e.label})}))),c&&Z(Q,null,c))},te=o.a.createElement,ne=function(e){var t=e.checked,n=e.onChange,r=e.value,a=e.label,i=e.group,c=e.disabled,u=void 0!==c&&c,l="".concat(i,"-").concat(r);return te(o.a.Fragment,null,te(X,{id:l,value:r,name:l,type:"checkbox",checked:t,onChange:function(){return!u&&n(r,!t)},disabled:u}),te(z,{htmlFor:l,checked:t},a))},re=o.a.createElement,oe=function(e){var t=e.id,n=e.options,o=e.selectedOptions,a=e.onChange,i=e.title,c=e.description,u=e.disabled,l=void 0!==u&&u,s=Object(r.useCallback)((function(e,t){if(!l){var r=o.filter((function(t){return t.value!==e}));if(!t)return a(r);var i=n.find((function(t){return t.value===e}));i&&a([].concat(d(r),[i]))}}),[l,n,a,o]);return re($,null,i&&re(B.a,null,i),re(V,null,n.map((function(e){return re(ne,{group:t,key:e.value,checked:o.includes(e),onChange:s,value:e.value,label:e.label})}))),c&&re(Q,null,c))},ae=n("o0o1"),ie=n.n(ae),ce=q.c.div.withConfig({displayName:"InputContainerstyles__InputContainer",componentId:"sc-17e590b-0"})(["display:flex;"]),ue=q.c.button.withConfig({displayName:"SubmitButtonstyles__SubmitButton",componentId:"sc-75aind-0"})(["color:",";background-color:",";border:none;flex:0.5;position:relative;outline-style:dashed;outline-width:2px;cursor:pointer;&:focus,&:active{outline-color:",";}&:before{content:'';display:block;width:10px;height:20px;border:3px solid white;position:absolute;left:calc(50% - 10px);top:12px;-webkit-transition:all 0.12s,border-color 0.08s;transition:all 0.12s,border-color 0.08s;border-top-color:transparent;border-left-color:transparent;transform:rotate(45deg);}"],(function(e){return e.theme.colors.textSecondary}),(function(e){return e.complete?e.theme.colors.primary:e.theme.colors.bgMuted}),(function(e){return e.theme.colors.primary})),le=o.a.createElement,se=function(e){var t=e.onSubmit,n=e.value,o=void 0===n?"":n,i=e.title,c=e.placeholder,u=e.placeholders,l=e.description,s=Object(r.useState)(o||""),p=s[0],f=s[1],d=Object(r.useState)(!1),b=d[0],h=d[1],m=Object(r.useState)((null===u||void 0===u?void 0:u.length)?0:-1),y=m[0],g=m[1],v=Object(r.useState)(-1===y?c:u[y]),O=v[0],E=v[1];Object(r.useEffect)((function(){null!==o&&void 0!==o&&(f(o),h(!0))}),[o]),Object(r.useEffect)((function(){if(u||!(u.length<2)){!function(){var e,t,n,r,o,i,c;ie.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,ie.a.awrap(Object(a.e)(7e3));case 2:e=u[y%u.length],t=u[(y+1)%u.length],n=e.length+t.length+4,r=25,o=0;case 7:if(!(o<=n)){l.next=16;break}return i=o<=e.length,c=n-o<=t.length,i?E(e.substr(0,e.length-o)):c&&E(t.substr(0,t.length-(n-o))),l.next=13,ie.a.awrap(Object(a.e)(r));case 13:o++,l.next=7;break;case 16:g((function(e){return e+1%u.length}));case 17:case"end":return l.stop()}}),null,null,null,Promise)}()}}),[y]);var w=function(e){h(!0),t(e)};return le($,null,i&&le(B.a,null,i),le(ce,null,le(X,{type:"text",value:p,placeholder:O,onChange:function(e){b?t(e.target.value):f(e.target.value)},onKeyPress:function(e){return"Enter"===e.key&&w(p)},onBlur:function(){return w(p)}}),le(ue,{type:"submit",complete:p.trim().length>0,onClick:function(){return w(p)}})),l&&le(Q,null,l))},pe=o.a.createElement,fe=q.c.select.withConfig({displayName:"Dropdown__Select",componentId:"ca76f5-0"})(["font-size:1.2rem;padding:1rem;flex:1;border:none;appearance:none;background-color:white;&:focus,&:active{outline-style:dashed;outline-width:2px;outline-color:",";margin-right:3px;}"],(function(e){return e.theme.colors.primary})),de=q.c.option.withConfig({displayName:"Dropdown__Choice",componentId:"ca76f5-1"})(["color:",";"],(function(e){return e.theme.colors.textPrimary})),be=function(e){var t=e.id,n=e.options,o=e.selectedOption,a=e.onChange,i=e.title,c=e.description,u=e.disabled,l=void 0!==u&&u,s=Object(r.useCallback)((function(e){if(!l){var t=n.find((function(t){return t.value===e}));t&&a(t)}}),[l,n,a]);return pe($,null,i&&pe(B.a,null,i),pe(ce,null,pe(fe,{value:null===o||void 0===o?void 0:o.value,onChange:function(e){return s(e.target.value)}},n.map((function(e){return pe(de,{key:"".concat(t,"-").concat(e.value),value:e.value,label:e.label},e.label)}))),pe(ue,{type:"submit",complete:!!o,onClick:function(){return s(o.value)}})),c&&pe(Q,null,c))};function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=function(e){var t=e.webApp,n=e.staging,r=e.shared,o=e.staticPage,a=e.region,i=e.bucketName,c=t?"git::https://github.com/tomfa/terraform.git//webapp":"git::https://github.com/tomfa/terraform.git//files",u={bucket_name:i?'"'.concat(i,'"'):"var.".concat(C.BUCKET_NAME),aws_region:a?'"'.concat(a,'"'):"var.".concat(C.AWS_REGION)};t?(u.error_path='"/index.html"',u.error_code=o?"404":"200"):u.acl=r?'"public-read"':'"private"';var l=t?"web-app":"file-storage",s=n?[{name:"".concat(l,"-production"),parameters:u},{name:"".concat(l,"-staging"),parameters:me({},u,{bucket_name:i?'"'.concat(i,'.staging"'):'"\\${var.bucket_name}.staging"'})}]:[{name:l,parameters:u}],p=[];return Object.values(C).filter((function(e){return!!s.find((function(t){return!!Object.values(t.parameters).find((function(t){return t.includes("var.".concat(e))}))}))})).forEach((function(e){var t=function(e){var t;return(t={},b(t,C.BUCKET_NAME,"Name of S3 bucket"),b(t,C.AWS_REGION,"Region to deploy to, e.g. eu-north-1, us-east-1"),b(t,C.AWS_ACCESS_KEY,"e.g. AKIA... found in your AWS console > Security credentials"),b(t,C.AWS_SECRET_KEY,"e.g. yaAS$1... found in your AWS console > Security credentials"),b(t,C.ACL,"e.g. AKIA... found in your AWS console > Security credentials"),b(t,C.ERROR_RESPONSE_CODE,"e.g. HTTP status code response when no file matching path is found"),b(t,C.ERROR_RESPONSE_PATH,"e.g. Which file Cloudfront serves when encountering a missing file"),t)[e]}(e);t?(p.push('variable "'.concat(e,'" {')),p.push('  description = "'.concat(t,'"')),p.push("}")):p.push('variable "'.concat(e,'" {}'))})),s.forEach((function(e){p.push(""),p.push('module "'.concat(e.name,'" {')),p.push('  source = "'.concat(c,'"')),Object.entries(e.parameters).forEach((function(e){var t=h(e,2),n=t[0],r=t[1];p.push("  ".concat(n," = ").concat(r))})),p.push("}")})),p.push(""),function(e){var t=e.bucketType,n=e.hasStaging,r=[];return(n?["".concat(t,"-production"),"".concat(t,"-staging")]:[t]).forEach((function(e){var o=n&&e.split("-")[e.split("-").length-1],a=o?"".concat(o,"."):"";r.push({value:"module.".concat(e,".AWS_SECRET_ACCESS_KEY"),label:"".concat(a,"AWS_SECRET_ACCESS_KEY")}),r.push({value:"module.".concat(e,".AWS_ACCESS_KEY_ID"),label:"".concat(a,"AWS_ACCESS_KEY_ID")}),r.push({value:"module.".concat(e,".BUCKET_NAME"),label:"".concat(a,"BUCKET_NAME")}),t===N.WEBAPP&&r.push({value:"module.".concat(e,".CLOUDFRONT_URL"),label:"".concat(a,"CLOUDFRONT_URL")})})),r}({bucketType:t?N.WEBAPP:N.FILE_STORAGE,hasStaging:n}).forEach((function(e){p.push('output "'.concat(e.label,'" {')),p.push("  value = ".concat(e.value)),p.push("}")})),p},ge=function(e){var t=e.webApp,n=e.staging,r=e.shared,o=e.staticPage,a=e.region,i=n?"two sets of":"a",c=ve({webApp:t,staticPage:o,shared:r}),u=n?"Two sets of AWS keys will be created that are able to upload to the buckets. One for test and one for production environment":"A set of AWS keys will be created that is able to upload to the bucket";return"Once run, it will create ".concat(i," S3 bucket").concat(t?" + Cloudfront":""," in ").concat(a,", configured ").concat(c,". ").concat(u,". Generated keys will be shown as output in the terminal.")},ve=function(e){var t=e.webApp,n=e.staticPage,r=e.shared;return t?n?"to serve a solid statically generated web app":"to serve a blazingly fast single-page web app":r?"for hosting publicly available files":"for storing and serving files for authorized requests"},Oe=q.c.pre.withConfig({displayName:"Prestyle__Pre",componentId:"sc-1cjlqsr-0"})(["position:relative;background-color:#3a3a3a;color:white;padding:1rem;margin-top:1.7rem;margin-bottom:1.7rem;overflow:auto;"]),Ee=q.c.span.withConfig({displayName:"Mutestyle__Mute",componentId:"sc-12r7eop-0"})(["color:",";"],(function(e){return e.theme.colors.textMuted})),we=o.a.createElement,Se=q.c.svg.withConfig({displayName:"LoadingIcon__Svg",componentId:"sc-1nn4cpf-0"})(["margin:5rem auto;display:block;shape-rendering:auto;& path{fill:",";}"],(function(e){return e.theme.colors.primary})),_e=function(e){var t=e.size,n=void 0===t?300:t;return we(Se,{xmlns:"http://www.w3.org/2000/svg",width:"".concat(n,"px"),height:"".concat(n,"px"),viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},we("g",{transform:"translate(50 50)"},we("g",null,we("animateTransform",{attributeName:"transform",type:"rotate",values:"0;45",keyTimes:"0;1",dur:"0.2s",repeatCount:"indefinite"}),we("path",{d:"M29.491524206117255 -5.5 L37.491524206117255 -5.5 L37.491524206117255 5.5 L29.491524206117255 5.5 A30 30 0 0 1 24.742744050198738 16.964569457146712 L24.742744050198738 16.964569457146712 L30.399598299691117 22.621423706639092 L22.621423706639096 30.399598299691114 L16.964569457146716 24.742744050198734 A30 30 0 0 1 5.5 29.491524206117255 L5.5 29.491524206117255 L5.5 37.491524206117255 L-5.499999999999997 37.491524206117255 L-5.499999999999997 29.491524206117255 A30 30 0 0 1 -16.964569457146705 24.742744050198738 L-16.964569457146705 24.742744050198738 L-22.621423706639085 30.399598299691117 L-30.399598299691117 22.621423706639092 L-24.742744050198738 16.964569457146712 A30 30 0 0 1 -29.491524206117255 5.500000000000009 L-29.491524206117255 5.500000000000009 L-37.491524206117255 5.50000000000001 L-37.491524206117255 -5.500000000000001 L-29.491524206117255 -5.500000000000002 A30 30 0 0 1 -24.742744050198738 -16.964569457146705 L-24.742744050198738 -16.964569457146705 L-30.399598299691117 -22.621423706639085 L-22.621423706639092 -30.399598299691117 L-16.964569457146712 -24.742744050198738 A30 30 0 0 1 -5.500000000000011 -29.491524206117255 L-5.500000000000011 -29.491524206117255 L-5.500000000000012 -37.491524206117255 L5.499999999999998 -37.491524206117255 L5.5 -29.491524206117255 A30 30 0 0 1 16.964569457146702 -24.74274405019874 L16.964569457146702 -24.74274405019874 L22.62142370663908 -30.39959829969112 L30.399598299691117 -22.6214237066391 L24.742744050198738 -16.964569457146716 A30 30 0 0 1 29.491524206117255 -5.500000000000013 M0 -20A20 20 0 1 0 0 20 A20 20 0 1 0 0 -20"}))))},Ae=n("iaY6"),Ce=q.c.button.withConfig({displayName:"PreButtonstyle__PreButton",componentId:"sc-1i8d5dz-0"})(["background-color:",";color:",";position:absolute;font-family:monospace;top:20px;right:20px;border:none;padding:0.3rem 0.6rem;cursor:pointer;outline-color:",";"],(function(e){return e.theme.colors.bgPrimary}),(function(e){return e.theme.colors.textPrimary}),(function(e){return e.theme.colors.secondary})),ke=o.a.createElement,Te=function(e){var t=e.mainTfContent,n=e.bucketName,o=Object(Ae.b)(),i=Object(r.useState)(!1),c=i[0],u=i[1],l=Object(r.useMemo)((function(){return["# Create a folder to store infrastructure code","mkdir infrastructure","cd infrastructure","","# Create config file","cat <<EOT >> ".concat(n||"main",".tf")].concat(d(t),["EOT","","# Deploy","terraform init","terraform apply"])}),[t,n]),s=Object(r.useCallback)((function(){!function(e){var t=window.document.createElement("textarea");t.setAttribute("style","position: absolute; bottom: 0; top: 0; width: 1; height: 1; opacity: 0.01;"),e.forEach((function(e){t.append(e),t.append("\n")})),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}(l),u(!0)}),[l]);return Object(r.useEffect)((function(){return u(!1)}),[t,n]),ke(Oe,null,l.map((function(e,t){return e.trim().startsWith("#")?ke(Ee,{key:t},e,"\n"):ke("span",{key:t},e,"\n")})),ke(Ce,{onClick:s},c&&ke("span",null,"Copied! ",ke(a.a,{color:o.colors.success},"\u2713"))||"Copy to clipboard"))},je=o.a.createElement,Pe=function(e){var t=function(e){return{mainTfContent:ye(e),description:ge(e)}}(e),n=t.description,a=t.mainTfContent,i=function(){var e=Object(g.useRouter)();return Object(r.useMemo)((function(){return e.query?"".concat(e.pathname,"?").concat(y.a.stringify(e.query)):"".concat(e.pathname)}),[e.query,e.pathname,e.route])}(),c=Object(r.useState)(!0),u=c[0],l=c[1];return Object(r.useEffect)((function(){setTimeout((function(){return l(!1)}),800)}),[a]),u?je(_e,null):je(o.a.Fragment,null,je(B.a,{as:"h1"},"Bucket is served!"),"Just run the script below, or"," ",je("a",{href:i},"save a link to this configuration")," for later.",je(Te,{bucketName:e.bucketName,mainTfContent:a}),je(Q,null,"The script above will plan the infrastructure and prompt you for confirmation."),je(Q,null,n),je(B.a,null,"Prerequisites"),je("h4",null,"AWS Account"),je("p",null,"If you don't have an AWS account already, sign up at"," ",je("a",{href:"https://portal.aws.amazon.com/billing/signup#/start"},"aws.amazon.com")),je("p",null,"If you don't have your ",je("strong",null,"AWS_SECRET_ACCESS_KEY")," and"," ",je("strong",null,"AWS_ACCESS_KEY_ID")," handy, find those in the top right corner under your name > Security credentials. They should be exported to your environment:"),je(Oe,null,je(Ee,null,"# Export AWS keys","\n"),"export AWS_SECRET_ACCESS_KEY=yaAS$1...","\n","export AWS_ACCESS_KEY_ID=AKIA..."),je("h4",null,"Terraform installed"),je("p",null,"If you haven't already,"," ",je("a",{href:"https://learn.hashicorp.com/tutorials/terraform/install-cli"},"install Terraform")),je(Oe,null,je(Ee,null,"# For Macs with homebrew","\n"),"brew install hashicorp/tap/terraform"),je(Q,null,"See"," ",je("a",{href:"https://learn.hashicorp.com/tutorials/terraform/install-cli"},"learn.hashicorp.com/tutorials/terraform/install-cli")," ","for other platforms."))},Ne=o.a.createElement,Ie=function(){var e=F(),t=e.answers,n=e.renderQuestions,r=e.answerQuestion,o=e.hasAnsweredAll;return Ne(a.c,null,n.map((function(e){if("radio"===e.type){var n=t[e.id];return Ne(ee,{id:e.id,key:e.id,options:e.options,selectedOption:n,onChange:function(t){return r(e.id,t)},title:e.title,description:e.description})}if("dropdown"===e.type){var o=t[e.id];return Ne(be,{id:e.id,key:e.id,options:e.options,selectedOption:o,onChange:function(t){return r(e.id,t)},title:e.title,description:e.description})}if("checkbox"===e.type){var a=t[e.id];return Ne(oe,{id:e.id,key:e.id,options:e.options,selectedOptions:a,onChange:function(t){return r(e.id,t)},title:e.title,description:e.description})}if("text"===e.type){var i=t[e.id];return Ne(se,{id:e.id,key:e.id,value:i,placeholder:e.placeholder,placeholders:e.placeholders,onSubmit:function(t){return r(e.id,t)},title:e.title,description:e.description})}throw new Error("Unexpected question type in ".concat(e))})),o&&Ne(Pe,{webApp:U(t,_.storageType,"webapp"),shared:U(t,_.aclPublic,A.TRUE),staging:U(t,_.stagingEnv,A.TRUE),staticPage:U(t,_.webappIsStatic,A.TRUE),bucketName:W(t,_.bucketName),region:W(t,_.region)}))},xe=o.a.createElement;function Re(){return xe(a.b,null,xe(i.a,null),xe(s,null),xe(Ie,null),xe(c.a,null))}},o0o1:function(e,t,n){e.exports=n("ls82")}},[["/EDR",0,2,1,3,4]]]);