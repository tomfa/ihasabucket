{"version":3,"file":"static/webpack/static/development/pages/index.js.752b815a9f3dba7889ab.hot-update.js","sources":["webpack:///./sections/FAQ/index.tsx"],"sourcesContent":["import Header from '../../components/Header.style';\nimport Pre from '../../components/code/Pre.style';\nimport useQuestions, { useSummary } from '../../questions/useQuestions';\nimport { Section } from '../../components/utils';\nimport { QuestionSummary } from '../../utils/terraform/types';\nimport Deployment from './Deployment';\nimport FAQAccordian from './FAQAccordian';\nimport { FAQuestion } from './types';\n\nconst FAQ = () => {\n  const { hasAnsweredAll } = useQuestions();\n  const summary = useSummary();\n  // if (!hasAnsweredAll) {\n  //   return null;\n  // }\n  const faqData = getFAQuestions(summary);\n  return (\n    <Section id=\"faq\">\n      <Header>Frequently asked questions</Header>\n      {faqData.map((q) => (\n        <FAQAccordian key={q.id} question={q} />\n      ))}\n    </Section>\n  );\n};\n\nconst getFAQuestions = (summary: QuestionSummary): FAQuestion[] => {\n  return [\n    {\n      id: 'faq:deploy',\n      title: 'How do I deploy to this S3 bucket?',\n      answer: <Deployment summary={summary} />,\n    },\n    {\n      id: 'faq:charged',\n      title: 'How much will I be charged?',\n      answer: (\n        <>\n          <p>Very little.</p>\n          <p>\n            S3 and Cloudfront are basic, cheap infrastructure. Since AWS charges\n            per use, it&apos;s impossible to say exactly, but 1$ per month would\n            likely covers your expenses.\n          </p>\n          <p>\n            If you have recently signed up for AWS, the expenses will likely be\n            included in the free tier and won&apos;t pay anything at all.\n          </p>\n        </>\n      ),\n    },\n    {\n      id: 'faq:pre-deploy-change',\n      title: 'Can I change the input before I deploy it?',\n      answer: (\n        <>\n          <p>Yes, go right ahead!</p>\n          <p>\n            Hopefully, the arguments and code is self-explainatory. If not,\n            check out{' '}\n            <a href=\"http://github.com/tomfa/terraform\">\n              github.com/tomfa/terraform\n            </a>{' '}\n            or the{' '}\n            <a href=\"https://registry.terraform.io/providers/hashicorp/aws/latest\">\n              Terraform registry\n            </a>\n            , which contains the modules which the repo uses.\n          </p>\n        </>\n      ),\n    },\n    {\n      id: 'faq:stuck-on-validation',\n      title: 'My deployment is stuck on verification of certificate.',\n      answer: (\n        <>\n          <p>\n            The script will stop and wait for the certificate settings to be\n            verified to be correct before continuing.\n          </p>\n          <p>\n            If you use AWS DNS,{' '}\n            {summary.configureDns && (\n              <strong>which it looks like you do –</strong>\n            )}\n            go to your domain registrar, then configure the DNS servers to point\n            to the newly created Route 53 zone that this script has created. You\n            can find the DNS servers that you must point to in the{' '}\n            <a href=\"https://console.aws.amazon.com/route53/v2/hostedzones#\">\n              AWS console &gt; Route 53\n            </a>\n            .\n          </p>\n          <p>\n            If you use a different DNS,{' '}\n            {!summary.configureDns && summary.createCertificates && (\n              <strong>which it looks like you do – </strong>\n            )}\n            you must add DNS records there to match the records wanted from AWS\n            Certificate manager. These records can be found at{' '}\n            <a href=\"https://console.aws.amazon.com/route53/v2/hostedzones#\">\n              AWS console &gt; Certificate Manager\n            </a>\n          </p>\n          <p>\n            Both of these methods require DNS propagation before they take\n            effect, so you might have to wait an hour or even a day. The script\n            times out after 45 min, but you can re-run it tomorrow, and it will\n            continue where it left off.\n          </p>\n          <p>\n            A last resort, can be to add the following line inside terraform\n            code:\n            <Pre>\n              module &quot;certificate&quot; &#123; <br />\n              {'  '}... <br />\n              {'  '}validation_method = EMAIL <br />\n              &#125;\n            </Pre>\n            Note that you will have to respond to an email sent to\n            postmaster@your-bucket-domain for the validation to go through, and\n            that this process will have to be re-run every 3 years or so.\n          </p>\n        </>\n      ),\n    },\n    {\n      id: 'faq:name-taken',\n      title: 'My bucket name was taken',\n      answer: (\n        <>\n          <p>\n            You can rename your bucket and try again. If you want to keep your\n            the domain name, simply replace the bucket_name variables in the\n            script, but keep the domain variables, and run the script again.\n          </p>\n          <p>\n            Tip: you can go to replace-me.s3.amazonaws.com to check if a given\n            bucket is available. If it&apos;s not take, it will reply with error\n            message <code>The specified bucket does not exist</code>\n          </p>\n        </>\n      ),\n    },\n    {\n      id: 'faq:deploy-twice',\n      title: 'What happens if I deploy it twice?',\n      answer: (\n        <>\n          <p>\n            If you still have your <code>terraform.tfstate</code> file, it will\n            check the AWS resources, and check that they still match the code.\n            If necessary, it will ask for confirmation before changing the\n            infrastructure to match the code.\n          </p>\n          <p>\n            If you don&apos;t have your state file, it will attempt to recreate\n            everything. It will likely fail due to a duplicate bucket name,\n            unless you&apos;ve changed that.\n          </p>\n        </>\n      ),\n    },\n    {\n      id: 'faq:post-deploy-change',\n      title: 'Can I change the input and redeploy?',\n      answer: (\n        <>\n          <p>\n            Yes. You can change the region, bucket name and most other things.\n            {summary.createCertificates && (\n              <>\n                Note that if you make changes that affect the certificate it\n                might be re-created.{' '}\n                {!summary.configureDns && (\n                  <>\n                    Since you seem to not be using AWS for DNS, you will then\n                    have to reconfigure the DNS pointers to the certificate\n                    afterwards.\n                  </>\n                )}\n              </>\n            )}\n          </p>\n          <p>\n            When you want to apply the changes, just re-run{' '}\n            <code>terraform apply</code>.\n          </p>\n        </>\n      ),\n    },\n    {\n      id: 'faq:terraform-destroy',\n      title: 'How can I remove everything I just created?',\n      answer: (\n        <p>\n          <code>terraform destroy</code> will take down all created\n          infrastructure, as long as you have kept the{' '}\n          <code>terraform.tfstate</code> file. If not, you will have to delete\n          it from the <a href=\"https://console.aws.amazon.com/\">AWS console</a>.\n        </p>\n      ),\n    },\n    {\n      id: 'faq:generated-files',\n      title: 'What do I do with the generated files?',\n      answer: (\n        <>\n          <h4>Short answer:</h4>\n          <p>\n            Save <code>terraform.tfstate</code> for use later. The{' '}\n            <code>.terraform</code> folder is basically a cache, and can be\n            deleted.\n          </p>\n          <h4>Longer answer:</h4>\n          <p>\n            After you have run <code>terraform apply</code>, a folder will be\n            created named <code>.terraform</code> along with a file named{' '}\n            <code>terraform.tfstate</code>\n          </p>\n          <p>\n            If you save <code>terraform.tfstate</code> you can make changes in\n            the code, and re-apply to make those changes take effect in the\n            infrastructure. This file is also needed to perform{' '}\n            <code>terraform destroy</code> in case you wish to take down the\n            infrastructure.\n          </p>\n          <p>\n            It&apos;s OK to delete everything as well, but then you&apos;ll have\n            to make further changes using the{' '}\n            <a href=\"https://console.aws.amazon.com\">AWS console</a>.\n          </p>\n        </>\n      ),\n    },\n  ];\n};\n\nexport default FAQ;\n"],"mappings":"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","sourceRoot":""}